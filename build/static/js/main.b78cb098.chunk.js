(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{14:function(e,n,t){e.exports=t(40)},39:function(e,n,t){},40:function(e,n,t){"use strict";t.r(n);var a=t(0),u=t.n(a),c=t(13),r=t.n(c),l=t(5),o=t(2),i=t(4),m=function(e){var n=e.onSubmit,t=e.contacts,a=e.eventHandler;return u.a.createElement("div",null,u.a.createElement("h2",null,"Add Contact"),u.a.createElement("form",{onSubmit:n},u.a.createElement("div",null,"Name: ",u.a.createElement("input",{name:"name",value:t.name,onChange:a})),u.a.createElement("div",null,"Number: ",u.a.createElement("input",{name:"number",value:t.number,onChange:a})),u.a.createElement("div",null,u.a.createElement("button",{type:"submit"},"Add Contact"))))},s=function(e){var n=e.name,t=e.number,a=e.eventHandler;return u.a.createElement("li",null,n,": ",t,u.a.createElement("button",{onClick:a},"Delete"))},f=function(e){var n=e.contacts,t=e.filter,a=e.eventHandler,c=n.filter(function(e){return e.name.toLowerCase().includes(t.toLowerCase())}),r=function(){return c.map(function(e){return u.a.createElement(s,{key:e.id,name:e.name,number:e.number,eventHandler:function(){return a(e)}})})};return 0===r().length?u.a.createElement("div",null,u.a.createElement("p",null,"No Results")):u.a.createElement("div",null,r())},d=function(e){var n=e.name,t=e.value,a=e.eventHandler;return u.a.createElement("div",null,"Search: ",u.a.createElement("input",{name:n,value:t,onChange:a}))},b=function(e){var n=e.message;return null===n?null:u.a.createElement("div",{className:n.status},n.message)},v=t(3),E=t.n(v),h="http://localhost:3001/api/persons",p=function(){return E.a.get(h).then(function(e){return e.data})},g=function(e){return E.a.post(h,e).then(function(e){return e.data})},w=function(e){return E.a.delete("".concat(h,"/").concat(e)).then(function(e){return e.data})},j=function(e,n){return E.a.put("".concat(h,"/").concat(e),n).then(function(e){return e.data})},O=function(e){var n=Object(a.useState)([]),t=Object(i.a)(n,2),c=t[0],r=t[1],s=Object(a.useState)({name:"",number:""}),v=Object(i.a)(s,2),E=v[0],h=v[1],O=Object(a.useState)(""),C=Object(i.a)(O,2),y=C[0],H=C[1],S=Object(a.useState)({message:null,status:null}),k=Object(i.a)(S,2),N=k[0],T=k[1],L="Contact has already been deleted form the server",A="error",D=function(e,n){T(Object(o.a)({},N,{message:e,status:n}))};Object(a.useEffect)(function(){p().then(function(e){return r(e)})},[]);return u.a.createElement("div",null,u.a.createElement("h2",{className:"spacing-bottom"},"Phonebook"),u.a.createElement(b,{message:N}),u.a.createElement(d,{name:"filter",value:y,eventHandler:function(e){H(e.target.value)}}),u.a.createElement(m,{onSubmit:function(e){e.preventDefault();var n={name:E.name,number:E.number};if(c.map(function(e){return e.name.toLowerCase()===E.name.toLowerCase()}).includes(!0)){if(window.confirm("".concat(n.name," already in list. Would you like to update number to ").concat(n.number))){var t=c.find(function(e){return e.name===n.name}),a=Object(o.a)({},t,{number:n.number});j(t.id,a).then(function(e){r(c.map(function(n){return n.id!==t.id?n:e}))}).then(function(){D("".concat(n.name," updated"),"success"),setTimeout(function(){D(null,null)},5e3)}).catch(function(e){D(L,A),r(c.filter(function(e){return e.id!==a.id})),setTimeout(function(){D(null,null)},5e3)})}}else g(n).then(function(e){r(c.concat(e))}).then(function(){D("".concat(n.name," added"),"success"),setTimeout(function(){D(null,null)},5e3)});h(Object(o.a)({},E,{name:"",number:""}))},contacts:E,eventHandler:function(e){h(Object(o.a)({},E,Object(l.a)({},e.target.name,e.target.value)))}}),u.a.createElement("h2",null,"Contacts"),u.a.createElement(f,{contacts:c,filter:y,eventHandler:function(e){if(window.confirm("Are you sure you want to delete ".concat(e.name,"?"))){var n=c.find(function(n){return n.id===e.id});w(n.id).then(function(e){r(c.filter(function(e){return e.id!==n.id}))}).then(function(){D("".concat(e.name," deleted"),"success"),setTimeout(function(){D(null,null)},5e3)}).catch(function(e){D(L,A),r(c.filter(function(e){return e.id!==n.id})),setTimeout(function(){D(null,null)},5e3)})}}}))};t(39);r.a.render(u.a.createElement(O,null),document.getElementById("root"))}},[[14,1,2]]]);
//# sourceMappingURL=main.b78cb098.chunk.js.map